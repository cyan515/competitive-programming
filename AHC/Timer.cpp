
class Timer {
public:
  void start() {
    origin = rdtsc();
  }
  
  inline double get_time() {
    return (rdtsc() - origin) * SECONDS_PER_CLOCK;
  }
  
private:
  constexpr static double SECONDS_PER_CLOCK = 1 / 3.0e9;
  unsigned long long origin;
  
  inline static unsigned long long rdtsc() {
    unsigned long long lo, hi;
    __asm__ volatile ("rdtsc" : "=a" (lo), "=d" (hi));
    return (hi << 32) | lo;
  }
};
